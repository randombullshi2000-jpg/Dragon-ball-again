/**
 * Enemy Database
 */

const ENEMIES = {
  wolf: {
    id: 'wolf',
    name: 'Wild Wolf',
    sprite: 'WOLF_IDLE',
    pl: 5,
    hp: 50,
    str: 2, spd: 4, end: 1,
    drops: [{ item: 'meat', chance: 0.8 }, { item: 'fur', chance: 0.5 }],
    xpZeni: 20,
    behavior: 'aggressive',
    attacks: ['claw', 'bite', 'pounce'],
    color: '#aaaaaa',
    act: 0,
  },

  wolf_pack: {
    id: 'wolf_pack',
    name: 'Wolf Pack',
    sprite: 'WOLF_IDLE',
    pl: 5,
    hp: 40,
    str: 2, spd: 5, end: 1,
    drops: [{ item: 'meat', chance: 0.7 }],
    xpZeni: 15,
    behavior: 'pack',
    groupSize: 3,
    attacks: ['claw', 'bite'],
    color: '#999999',
    act: 0,
  },

  bandit_grunt: {
    id: 'bandit_grunt',
    name: 'Bandit Grunt',
    sprite: 'BANDIT_IDLE',
    pl: 8,
    hp: 80,
    str: 3, spd: 2, end: 2,
    drops: [{ item: 'zeni', amount: 50, chance: 1.0 }],
    xpZeni: 50,
    behavior: 'aggressive',
    attacks: ['punch', 'kick', 'grab'],
    color: '#884422',
    act: 0,
  },

  bandit_tough: {
    id: 'bandit_tough',
    name: 'Tough Bandit',
    sprite: 'BANDIT_IDLE',
    pl: 15,
    hp: 150,
    str: 6, spd: 3, end: 5,
    drops: [{ item: 'zeni', amount: 100, chance: 1.0 }, { item: 'potion', chance: 0.3 }],
    xpZeni: 100,
    behavior: 'defensive',
    attacks: ['punch', 'heavy_punch', 'block'],
    color: '#664422',
    act: 0,
  },

  bandit_leader: {
    id: 'bandit_leader',
    name: 'Bandit Leader',
    sprite: 'BANDIT_IDLE',
    pl: 25,
    hp: 250,
    str: 10, spd: 5, end: 8,
    drops: [{ item: 'zeni', amount: 500, chance: 1.0 }, { item: 'champion_headband', chance: 0.5 }],
    xpZeni: 300,
    behavior: 'boss',
    attacks: ['punch', 'heavy_punch', 'combo', 'grab'],
    color: '#442200',
    act: 1,
    phases: [
      { hpThreshold: 0.60, speedMult: 1.2, message: 'Stop holding back!' },
      { hpThreshold: 0.30, speedMult: 1.5, damageMult: 1.3, message: 'RAARGH!' },
    ],
  },

  wild_boar: {
    id: 'wild_boar',
    name: 'Wild Boar',
    sprite: 'WOLF_IDLE',  // placeholder
    pl: 20,
    hp: 200,
    str: 8, spd: 3, end: 7,
    drops: [{ item: 'meat', amount: 5, chance: 1.0 }],
    xpZeni: 150,
    behavior: 'aggressive',
    attacks: ['charge', 'gore', 'trample'],
    color: '#8B4513',
    act: 1,
  },

  tournament_fighter_1: {
    id: 'tournament_fighter_1',
    name: 'Tournament Fighter',
    sprite: 'BANDIT_IDLE',
    pl: 18,
    hp: 180,
    str: 7, spd: 5, end: 5,
    drops: [],
    xpZeni: 200,
    behavior: 'balanced',
    attacks: ['punch', 'kick', 'combo'],
    color: '#336699',
    act: 1,
  },

  tournament_champion: {
    id: 'tournament_champion',
    name: 'Village Champion',
    sprite: 'BANDIT_IDLE',
    pl: 35,
    hp: 350,
    str: 14, spd: 8, end: 12,
    drops: [{ item: 'zeni', amount: 1000, chance: 1.0 }],
    xpZeni: 500,
    behavior: 'boss',
    attacks: ['sandstorm_fist', 'punch', 'kick', 'combo', 'dodge'],
    color: '#224488',
    act: 1,
    signature: 'sandstorm_fist',
  },

  mountain_tiger: {
    id: 'mountain_tiger',
    name: 'Mountain Tiger',
    sprite: 'WOLF_IDLE',  // placeholder
    pl: 60,
    hp: 600,
    str: 25, spd: 20, end: 18,
    drops: [{ item: 'tiger_fang', chance: 1.0 }, { item: 'meat', amount: 8, chance: 1.0 }],
    xpZeni: 1000,
    behavior: 'hunter',
    attacks: ['pounce', 'claw_swipe', 'bite', 'roar'],
    color: '#CC8800',
    act: 3,
    phases: [
      { hpThreshold: 0.60, message: '*ROAR* - stuns all for 0.5s', aoe: true },
      { hpThreshold: 0.30, speedMult: 1.5, damageMult: 1.5, message: 'Berserk Mode!' },
    ],
  },

  yamcha: {
    id: 'yamcha',
    name: 'Yamcha',
    sprite: 'YAMCHA_IDLE',
    pl: 65,
    hp: 650,
    str: 22, spd: 18, end: 16, technique: 20,
    drops: [],
    xpZeni: 0,  // friendly rival
    behavior: 'rival',
    attacks: ['wolf_fang_fist', 'punch', 'kick', 'combo'],
    color: '#224466',
    act: 3,
    friendly: true,
    signature: 'wolf_fang_fist',
  },

  bandit_king: {
    id: 'bandit_king',
    name: 'Mountain Bandit King',
    sprite: 'BANDIT_IDLE',
    pl: 45,
    hp: 450,
    str: 18, spd: 12, end: 15,
    drops: [{ item: 'zeni', amount: 2000, chance: 1.0 }, { item: 'stolen_goods', chance: 1.0 }],
    xpZeni: 800,
    behavior: 'boss',
    attacks: ['heavy_punch', 'combo', 'grab', 'power_strike'],
    color: '#441100',
    act: 3,
    phases: [
      { hpThreshold: 0.50, message: 'I\'ll crush you!', damageMult: 1.4 },
    ],
  },

  master_shen: {
    id: 'master_shen',
    name: 'Master Shen (Restrained)',
    sprite: 'ROSHI_IDLE',
    pl: 110,
    hp: 1100,
    str: 40, spd: 35, end: 30, technique: 40, ki: 25,
    drops: [],
    xpZeni: 0,
    behavior: 'master',
    attacks: ['dodon_ray', 'crane_kick', 'aerial', 'combo'],
    color: '#666633',
    act: 3,
    signature: 'dodon_ray',
    winCondition: 'last_3_minutes',
    maxFightDuration: 180,
  },

  roshi_test: {
    id: 'roshi_test',
    name: 'Master Roshi (50% Power)',
    sprite: 'ROSHI_IDLE',
    pl: 120,
    hp: 1200,
    str: 45, spd: 40, end: 35, technique: 45, ki: 30,
    drops: [],
    xpZeni: 0,
    behavior: 'master',
    attacks: ['kamehameha', 'punch', 'kick', 'combo', 'afterimage'],
    color: '#336699',
    act: 3,
    signature: 'kamehameha',
    winCondition: 'land_10_hits',
    adjustToPL: true,  // Actually adjusts to player PL Ã— 1.5
  },
};

// Attack definitions
const ATTACKS = {
  punch: {
    name: 'Punch',
    damage: 0.08,   // fraction of attacker PL
    stamina: 5,
    range: 1.0,
    hitstun: 0.2,
    type: 'physical',
  },
  kick: {
    name: 'Kick',
    damage: 0.10,
    stamina: 8,
    range: 1.2,
    hitstun: 0.3,
    type: 'physical',
  },
  heavy_punch: {
    name: 'Heavy Punch',
    damage: 0.20,
    stamina: 20,
    range: 1.0,
    hitstun: 0.6,
    knockback: 1.5,
    type: 'physical',
    superArmor: true,
  },
  combo: {
    name: '3-Hit Combo',
    damage: 0.07,   // per hit
    hits: 3,
    stamina: 20,
    range: 1.0,
    hitstun: 0.15,
    type: 'physical',
  },
  grab: {
    name: 'Grab',
    damage: 0.15,
    stamina: 15,
    range: 0.8,
    hitstun: 0.8,
    type: 'grab',
    unblockable: true,
  },
  claw: {
    name: 'Claw Swipe',
    damage: 0.12,
    stamina: 8,
    range: 1.3,
    hitstun: 0.3,
    type: 'physical',
  },
  bite: {
    name: 'Bite',
    damage: 0.18,
    stamina: 10,
    range: 0.7,
    hitstun: 0.5,
    type: 'physical',
    statusEffect: { type: 'bleeding', duration: 5, damage: 2 },
  },
  pounce: {
    name: 'Pounce',
    damage: 0.25,
    stamina: 20,
    range: 3.0,
    hitstun: 0.8,
    type: 'physical',
    projectileSpeed: 8,
  },
  charge: {
    name: 'Charge',
    damage: 0.30,
    stamina: 25,
    range: 4.0,
    hitstun: 1.0,
    type: 'physical',
  },
  roar: {
    name: 'Roar',
    damage: 0,
    stamina: 20,
    range: 3.0,
    type: 'status',
    statusEffect: { type: 'stun', duration: 0.5 },
    aoe: true,
  },
  wolf_fang_fist: {
    name: 'Wolf Fang Fist',
    damage: 0.08,
    hits: 6,
    stamina: 40,
    range: 1.5,
    hitstun: 0.1,
    type: 'special',
    finisher: { damage: 0.25, hitstun: 1.0 },
  },
  kamehameha: {
    name: 'Kamehameha',
    damage: 0.60,
    stamina: 50,
    ki: 50,
    range: 15.0,
    type: 'ki',
    chargeable: true,
    chargeTime: 1.5,
    projectileSpeed: 12,
  },
  dodon_ray: {
    name: 'Dodon Ray',
    damage: 0.50,
    stamina: 30,
    ki: 30,
    range: 20.0,
    type: 'ki',
    projectileSpeed: 18,
    narrow: true,
  },
  crane_kick: {
    name: 'Crane Kick',
    damage: 0.35,
    stamina: 25,
    range: 1.5,
    hitstun: 1.2,
    type: 'physical',
    aerial: true,
  },
  power_strike: {
    name: 'Power Strike',
    damage: 0.40,
    stamina: 35,
    range: 1.2,
    hitstun: 1.0,
    type: 'physical',
    superArmor: true,
    knockback: 3.0,
  },
  sandstorm_fist: {
    name: 'Sandstorm Fist',
    damage: 0.15,
    hits: 5,
    stamina: 45,
    range: 1.5,
    type: 'special',
    statusEffect: { type: 'stagger', duration: 1.0 },
  },
  afterimage: {
    name: 'Afterimage Strike',
    damage: 0.30,
    stamina: 40,
    range: 2.0,
    type: 'special',
    iframes: 0.5,
  },
  trample: {
    name: 'Trample',
    damage: 0.20,
    stamina: 15,
    range: 1.0,
    hitstun: 0.4,
    type: 'physical',
    aoe: true,
  },
  gore: {
    name: 'Gore',
    damage: 0.28,
    stamina: 20,
    range: 0.8,
    hitstun: 0.8,
    type: 'physical',
    knockback: 2.0,
  },
  aerial: {
    name: 'Aerial Dive',
    damage: 0.25,
    stamina: 30,
    range: 2.0,
    hitstun: 0.6,
    type: 'physical',
    aerial: true,
    knockback: 1.0,
  },
};
